{"mappings":"AAAO,MAAMA,EAAO,CAClBC,WAAYC,SAASC,cAAc,gBACnCC,eAAgBF,SAASC,cAAc,iBACvCE,SAAUH,SAASC,cAAc,cAChCG,aAAcJ,SAASC,cAAc,UACtCI,oBAAqBL,SAASC,cAAc,6BAC5CK,UAAWN,SAASC,cAAc,eAClCM,WAAYP,SAASC,cAAc,gBACnCO,YAAaR,SAASC,cAAc,kBCetCQ,eAAeC,GAAmBC,QAAEA,IAClC,MAAMC,QAAeD,EAClBE,KAAIC,GASR,UAAqBC,GAAEA,EAAEC,YAAEA,EAAWC,MAAEA,EAAKC,aAAEA,EAAYC,UAAEA,IAE5D,IAAIC,EAAW,IAAIC,MAAM,KACzB,IAAK,IAAIC,EAAI,EAAGA,GAAKH,EAAUI,OAAS,EAAGD,GAAK,EAC9CF,GAAaI,EAAeL,EAAUG,IAAI,IAE3CG,QAAQC,IAAIN,GACb,MAAMO,EAAY,+CACwBZ,sGAEIC,mBAClCC,0DAEiBA,sCACFG,qCACAF,GAAgBU,kCAK3C,OAFAH,QAAQC,IAAIC,GAELA,C,CA3BIE,CAAYf,KAEpBgB,KAAK,IAERhC,EAAKK,SAAS4B,mBAAmB,YAAanB,E,CAyBhD,SAASY,EAAeQ,GAEtB,OAAOC,MADK,0FAETC,MAAKC,GAAYA,EAASC,SAC1BF,MAAKvB,IACJ,MAAM0B,EAAc1B,EAAQ2B,OAC5B,IAAIC,EAAa,GACjB,IAAK,IAAIjB,EAAI,EAAGA,EAAIe,EAAYd,OAAQD,GAAK,EAAG,CAC9C,IAAIkB,EAAUC,OAAOC,OAAOL,EAAYf,IACxCiB,EAAWC,EAAQ,IAAMA,EAAQ,GACjCR,IAAMQ,EAAQ,KAAMR,EAAIQ,EAAQ,G,CAElC,OAAOR,CAAC,G,CA1DLC,MADK,mJAETC,MAAKC,GAAYA,EAASC,SAC1BF,MAAKvB,GACGA,IAOWuB,KAAKxB","sources":["src/js/refs.js","src/index.js"],"sourcesContent":["export const refs = {\n  searchForm: document.querySelector('.search-form'),\n  btnSearchFilms: document.querySelector('.search-films'),\n  topFilms: document.querySelector('.top-films'),\n   productsList: document.querySelector('.films'),\n  paginationContainer: document.querySelector('#tui-pagination-container'),\n  arrowLeft: document.querySelector('.arrow_left'),\n  arrowRight: document.querySelector('.arrow_right'),\n  pageNumbers: document.querySelector('.page-numbers'),\n}\n\n // let genre_id = ' ';\n  // for (let i = 0; i <= genre_ids.length-1; i += 1){\n  //   genre_id = await getGenrisFilms(genre_ids[i]);\n  // };","import { refs } from './js/refs';\n\nconst KEY = '32432509d17cea42104bbb7507a382c7';\nconst api_key = `?api_key=${KEY}`;\nconst BASE_URL = 'https://api.themoviedb.org/3/';\n\n// &with_genres=28 filter\n\nfunction getPopularFilms() {\n  const url = `${BASE_URL}discover/movie${api_key}&append_to_response=videos,images&sort_by = popularity.desc`;\n  return fetch(url)\n    .then(response => response.json())\n    .then(results => {\n      return results;\n    });\n}\n\ntopFilms();\n\nfunction topFilms(film) {\n  getPopularFilms(film).then(renderProdutsItems);\n}\n\nasync function renderProdutsItems({ results }) {\n  const markup = await results\n    .map(result => {\n      // console.log(result);\n      return getFilmCard(result);\n    })\n    .join('');\n\n  refs.topFilms.insertAdjacentHTML('beforeend', markup);\n}\n\n function getFilmCard({ id, poster_path, title, release_date, genre_ids }) {\n  \n  let genre_id = ' '.split(',');\n  for (let i = 0; i <= genre_ids.length - 1; i += 1) {\n    genre_id +=  getGenrisFilms(genre_ids[i])+',';\n   };\n   console.log(genre_id);\n  const filmCard =  `\n  <li class='products__item' data-action='${id}' data-modal-open>\n  <img   class='products__img'\n      src='https://image.tmdb.org/t/p/original${poster_path}'\n      alt= '${title}'\n      width='100%'/>\n  <h2 class='product__title'>${title}</h2>\n  <p class='product__text'>${genre_id}</p>\n  <p class='product__text'>${release_date || first_air_date}</p>\n  </li>\n  `;\n  console.log(filmCard);\n\n  return filmCard;\n}\nfunction getGenrisFilms(a) {\n  const url = `${BASE_URL}genre/movie/list${api_key}`;\n  return fetch(url)\n    .then(response => response.json())\n    .then(results => {\n      const genresNames = results.genres;\n      let myObjGenre = {};\n      for (let i = 0; i < genresNames.length; i += 1) {\n        let element = Object.values(genresNames[i]);\n        myObjGenre[element[0]] = element[1];\n        a === element[0] ? (a = element[1]) : '';\n      };\n      return a;\n    });\n}\n\n\n"],"names":["$ee27a4d7c64fc8c4$export$21666b427502ea6d","searchForm","document","querySelector","btnSearchFilms","topFilms","productsList","paginationContainer","arrowLeft","arrowRight","pageNumbers","async","$1f0dc3b9307be026$var$renderProdutsItems","results","markup","map","result","id","poster_path","title","release_date","genre_ids","genre_id","split","i","length","$1f0dc3b9307be026$var$getGenrisFilms","console","log","filmCard","first_air_date","$1f0dc3b9307be026$var$getFilmCard","join","insertAdjacentHTML","a","fetch","then","response","json","genresNames","genres","myObjGenre","element","Object","values"],"version":3,"file":"index.0baf82ac.js.map"}